<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Sensor Dashboard</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
font-family:Segoe UI, sans-serif;
margin:0;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
}
.container{
max-width:900px;
margin:auto;
padding:20px;
}
h1{text-align:center;}
.card{
background:rgba(255,255,255,0.1);
backdrop-filter:blur(12px);
border-radius:15px;
padding:20px;
margin:15px 0;
box-shadow:0 0 20px rgba(0,0,0,0.3);
}
.value{
font-size:32px;
font-weight:bold;
}
.status-on{color:#ff4b5c;}
.status-off{color:#4caf50;}
button{
width:100%;
padding:15px;
margin-top:10px;
font-size:18px;
border:none;
border-radius:10px;
cursor:pointer;
}
.btn-on{background:#ff4b5c;color:white;}
.btn-off{background:#4caf50;color:white;}
</style>
</head>

<body>

<div class="container">

<h1>ğŸŒ± Smart Sensor Dashboard</h1>

<div class="card">
<h2>ğŸŒ¡ï¸ Temperature</h2>
<div id="temp" class="value">-- Â°C</div>
</div>

<div class="card">
<h2>ğŸŒ± Soil Moisture</h2>
<div id="soil" class="value">-- %</div>
</div>

<div class="card">
<h2>ğŸš¨ Buzzer Status</h2>
<div id="alarm" class="value">--</div>
</div>

<div class="card">
<h2>ğŸ›ï¸ Control Alarm</h2>
<button class="btn-on" onclick="setAlarm(true)">ğŸ”´ à¹€à¸›à¸´à¸” Alarm</button>
<button class="btn-off" onclick="setAlarm(false)">ğŸŸ¢ à¸›à¸´à¸” Alarm</button>
</div>

</div>

<script>

/* ===== Firebase Config ===== */
const firebaseConfig={
apiKey:"AIzaSyD3V-qYNxPh-jU8A5cEMGo4RH0fJOWa4C4",
databaseURL:"https://project-9172874912946027782-default-rtdb.firebaseio.com/"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

/* ===== Read Sensors ===== */

db.ref("sensor/temperature").on("value",snap=>{
let v=snap.val();
document.getElementById("temp").innerText=
v!=null?Number(v).toFixed(1)+" Â°C":"--";
});

db.ref("sensor/soil").on("value",snap=>{
let v=snap.val();
document.getElementById("soil").innerText=
v!=null?v+" %":"--";
});

db.ref("sensor/alarm").on("value",snap=>{
let val=snap.val();
let el=document.getElementById("alarm");

if(val){
el.innerText="ğŸ”Š ALARM ON";
el.className="value status-on";
}else{
el.innerText="ğŸ”‡ NORMAL";
el.className="value status-off";
}
});

/* ===== Control Alarm ===== */
function setAlarm(state){
db.ref("control/alarm").set(state);
}

</script>

</body>
</html>
